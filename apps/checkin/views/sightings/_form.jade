
|<script>
| $(document).ready(function() {
|   navigator.geolocation.getCurrentPosition(
|     onSuccess,
|     onError,
|       {
|         enableHighAccuracy: true,
|         timeout: 20000,
|         maximumAge: 120000
|       }
|    )
| });
| function onSuccess(position) {
|   document.getElementById("sighting_latitude").value = position.coords.latitude;
|   document.getElementById("sighting_longitude").value = position.coords.longitude;
| }
| function onError(err) {
|   var message;
|   switch (err.code) {
|     case 0:
|       message = 'Unknown error: ' + err.message;
|       break;
|     case 1:
|       message = 'You denied permission to retrieve a position.';
|       break;
|     case 2:
|       message = 'The browser was unable to determine a position: ' + error.message;
|       break;
|     case 3:
|       message = 'The browser timed out before retrieving the position.';
|       break;
|     }  
|     document.getElementById("gpserror").innerHTML = message
|  }
|</script>

p(id='gpserror')

form(action='/checkin', method='post')
  input(type='hidden', name='spime', value=spime.id)
  
  label
    | Location Name
    input(type='text', name='location_name')
  label
    | Your Name
    input(type='text', name='checkin_person')
  input(type='hidden', id='sighting_longitude', name='longitude')
  input(type='hidden', id='sighting_latitude', name='latitude')


  input(type="submit", name="Submit")